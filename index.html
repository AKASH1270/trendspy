<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Trendspy ‚Äî Fashion that Inspires</title>

<!-- Libraries -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root {
  --bg:#0b0f1e;
  --card:rgba(255,255,255,0.05);
  --muted:#a0aec0;
  --accent:#ec4899;
  --accent2:#8b5cf6;
  --success:#22c55e;
  --danger:#ef4444;
  --warn:#fbbf24;
  font-family:'Poppins',sans-serif;
  color:#e2e8f0;
}

/* Layout */
body {
  margin:0;
  background:radial-gradient(circle at top,#0f172a 0%,#060a15 100%);
  overflow-x:hidden;
}

/* Header */
header {
  position:sticky;top:0;z-index:100;
  backdrop-filter:blur(10px);
  background:rgba(0,0,0,0.7);
  padding:16px 40px;
  display:flex;justify-content:space-between;align-items:center;
  border-bottom:1px solid rgba(255,255,255,0.08);
}
.brand{display:flex;align-items:center;gap:10px;}
.logo{width:46px;height:46px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;color:#021d24;}
.nav-links{display:flex;gap:24px;}
.nav-links a{color:#e2e8f0;text-decoration:none;font-weight:500;transition:.3s;}
.nav-links a:hover{color:var(--accent);}

/* Hero */
.hero{text-align:center;padding:100px 20px;background:radial-gradient(circle at top,#8b5cf6,#0f172a);}
.hero h1{font-size:42px;font-weight:700;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.hero p{color:var(--muted);font-size:18px;margin-top:8px;}

/* Buttons */
button{padding:8px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:600;transition:.3s;}
button.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;}
button.primary:hover{filter:brightness(1.2);}
button.danger{background:linear-gradient(90deg,#ef4444,#dc2626);color:white;}

/* Cards */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;padding:20px;}
.card{background:var(--card);border-radius:14px;padding:10px;box-shadow:0 5px 15px rgba(0,0,0,0.3);transition:.3s;}
.card:hover{transform:translateY(-4px);}
.thumb img{width:100%;height:180px;object-fit:cover;border-radius:12px;}
.price{color:var(--success);font-weight:700;}

/* Cart */
aside{background:rgba(255,255,255,0.05);border-radius:16px;padding:16px;box-shadow:inset 0 0 10px rgba(236,72,153,0.1);}

/* Orders */
.orders{padding:40px 20px;}
.order-card{background:var(--card);padding:14px;margin-bottom:12px;border-radius:14px;}
.status{font-weight:700;}
.status.pending{color:var(--warn);}
.status.accepted{color:var(--accent2);}
.status.delivered{color:var(--success);}
.status.cancelled{color:var(--danger);}
.tracking-bar{display:flex;justify-content:space-between;position:relative;margin-top:8px;}
.tracking-bar::before{content:'';position:absolute;top:50%;left:0;right:0;height:4px;background:#1e293b;border-radius:4px;transform:translateY(-50%);}
.step{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;width:25%;}
.step .circle{width:14px;height:14px;border-radius:50%;background:#1e293b;margin-bottom:4px;}
.step.active .circle{background:var(--accent);}
.step.done .circle{background:var(--success);}
.step span{font-size:10px;color:#94a3b8;}

/* About Section */
.about{padding:80px 20px;text-align:center;background:rgba(255,255,255,0.03);}
.about h2{font-size:36px;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.about p{max-width:700px;margin:auto;color:var(--muted);}

/* Footer */
footer{text-align:center;padding:20px;background:rgba(0,0,0,0.6);color:var(--muted);}
footer button{margin-top:10px;}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:1000;}
.modal .box{background:linear-gradient(145deg,rgba(10,20,40,0.95),rgba(20,40,80,0.95));padding:30px;border-radius:20px;width:90%;max-width:400px;text-align:center;box-shadow:0 0 40px rgba(236,72,153,0.3);}
.modal input{width:90%;margin:8px 0;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:white;}
</style>
</head>

<body>

<header>
 <div class="brand"><div class="logo">T</div><h2>Trendspy</h2></div>
 <nav class="nav-links">
   <a href="#home">Home</a>
   <a href="#shop">Shop</a>
   <a href="#orders">My Orders</a>
   <a href="#about">About</a>
   <a href="javascript:void(0)" id="login-btn">Customer Login</a>
 </nav>
</header>

<section id="home" class="hero">
  <h1>Style That Defines You</h1>
  <p>Explore premium fashion for every mood and occasion.</p>
  <button class="primary" onclick="document.getElementById('shop').scrollIntoView({behavior:'smooth'})">Shop Now</button>
</section>

<section id="shop" style="display:grid;grid-template-columns:1fr 340px;gap:20px;padding:20px;">
  <div>
    <h3>üõç Latest Arrivals</h3>
    <div id="products" class="grid"></div>
  </div>
  <aside>
    <h3>üõí Cart <small id="cart-count">(0)</small></h3>
    <div id="cart-list"></div>
    <hr>
    <div style="display:flex;justify-content:space-between"><div>Subtotal</div><div id="subtotal">‚Çπ0</div></div>
    <div style="display:flex;justify-content:space-between"><div>Shipping</div><div>‚Çπ49</div></div>
    <div style="display:flex;justify-content:space-between;font-weight:700"><div>Total</div><div id="total">‚Çπ0</div></div>
    <button class="primary" id="checkout" style="margin-top:10px;width:100%">Checkout</button>
  </aside>
</section>

<section id="orders" class="orders">
  <h2>üì¶ My Orders</h2>
  <div id="orders-list"></div>
</section>

<section id="about" class="about">
  <h2>About Trendspy</h2>
  <p>Trendspy is your ultimate fashion destination. We blend comfort, class, and creativity to help you express your true self through fashion. From timeless classics to the latest trends, we‚Äôve got something for everyone.</p>
</section>

<footer>
  ¬© 2025 Trendspy ‚Äî Fashion that Inspires<br>
  <button class="primary" id="admin-login-btn">Admin Login</button>
</footer>

<!-- Customer Login Modal -->
<div class="modal" id="login-modal">
 <div class="box">
   <h2 style="color:var(--accent)">Customer Login üëó</h2>
   <input id="cust-name" placeholder="Enter your name">
   <input id="cust-contact" placeholder="Enter Phone (+91XXXXXXXXXX)">
   <button class="primary" id="cust-login">Login</button>
   <button id="close-login" style="margin-top:8px;">Close</button>
 </div>
</div>

<!-- Admin Login Modal -->
<div class="modal" id="admin-modal">
 <div class="box">
   <h2 style="color:var(--accent)">Admin Login üîê</h2>
   <input id="admin-user" placeholder="Username">
   <input id="admin-pass" type="password" placeholder="Password">
   <button class="primary" id="admin-login">Login</button>
   <button id="close-admin" style="margin-top:8px;">Close</button>
 </div>
</div>

<script>
const el=id=>document.getElementById(id);
const stages=['Pending','Accepted','Out for Delivery','Delivered'];

let user=JSON.parse(localStorage.getItem('user')||'null');
let cart=JSON.parse(localStorage.getItem('cart')||'{}');
let orders=JSON.parse(localStorage.getItem('orders')||'[]');

const products=[
 {id:1,title:"Men‚Äôs Denim Jacket",price:1999,image:"https://images.unsplash.com/photo-1521334884684-d80222895322"},
 {id:2,title:"Women‚Äôs Floral Dress",price:1399,image:"https://images.unsplash.com/photo-1520975922372-65b1f95a83ed"},
 {id:3,title:"White Shirt",price:799,image:"https://images.unsplash.com/photo-1598033125834-6fbd321c1f90"}
];

function save(){
 localStorage.setItem('cart',JSON.stringify(cart));
 localStorage.setItem('orders',JSON.stringify(orders));
 localStorage.setItem('user',JSON.stringify(user));
}
function toast(m){alert(m);}
function isValidPhone(p){return /^(\+\d{1,3}\d{7,14}|\d{10})$/.test(p);}

/* Render Products */
function renderProducts(){
 el('products').innerHTML=products.map(p=>`
 <div class="card">
   <div class="thumb"><img src="${p.image}" alt="${p.title}"></div>
   <h4>${p.title}</h4>
   <p class="price">‚Çπ${p.price}</p>
   <button class="primary" onclick="addToCart(${p.id})">Add to Cart</button>
 </div>`).join('');
}

/* Add to Cart */
function addToCart(id){
 const p=products.find(x=>x.id===id);
 if(!user)return toast("Please login first!");
 if(!cart[id])cart[id]={...p,qty:0};
 cart[id].qty++;
 save(); renderCart();
}

/* Render Cart */
function renderCart(){
 let html='',sub=0;const ids=Object.keys(cart);
 if(!ids.length){
   el('cart-list').innerHTML='Empty';
   el('cart-count').textContent='(0)';
   el('subtotal').textContent='‚Çπ0';
   el('total').textContent='‚Çπ0';
   return;
 }
 ids.forEach(i=>{
   let it=cart[i];
   sub+=it.price*it.qty;
   html+=`${it.title} √ó ${it.qty}<br>`;
 });
 el('cart-list').innerHTML=html;
 el('cart-count').textContent=`(${ids.length})`;
 el('subtotal').textContent='‚Çπ'+sub;
 el('total').textContent='‚Çπ'+(sub+49);
}

/* Checkout ‚Äî redirect to payment.html */
el('checkout').onclick=()=>{
 if(!user)return toast("Please login to continue.");
 if(!Object.keys(cart).length)return toast("Cart is empty!");
 const currentOrder={
   id:'ORD'+Date.now(),
   user:user.name,
   contact:user.contact,
   items:cart,
   total:el('total').textContent,
   trackingStage:0,
   status:'Pending',
   paymentStatus:'Unpaid',
   paymentMethod:'',
   remark:'',
   ts:new Date().toLocaleString()
 };
 localStorage.setItem('currentOrder',JSON.stringify(currentOrder));
 window.location.href='payment.html';
};

/* Render Orders */
function renderOrders(){
 const c=el('orders-list'); c.innerHTML='';
 if(!orders.length)return c.innerHTML='<p>No orders yet.</p>';
 orders.slice().reverse().forEach(o=>{
   let trackHTML='<div class="tracking-bar">';
   stages.forEach((s,i)=>{
     let cls='step';
     if(i<o.trackingStage)cls+=' done';
     else if(i===o.trackingStage)cls+=' active';
     trackHTML+=`<div class="${cls}"><div class="circle"></div><span>${s}</span></div>`;
   });
   trackHTML+='</div>';
   const recBtn=o.status==='Delivered'?`<button class="primary" onclick="downloadReceipt('${o.id}')">üßæ Receipt</button>`:'';
   const cancelBtn=o.status!=='Cancelled'&&o.status!=='Delivered'?`<button class="danger" onclick="cancelOrder('${o.id}')">Cancel</button>`:'';
   c.innerHTML+=`
   <div class="order-card">
     <b>${o.id}</b> ‚Äî ${o.ts}<br>
     Status: <span class="status ${o.status.toLowerCase()}">${o.status}</span><br>
     Total: <b>${o.total}</b>
     ${trackHTML}
     <div style="margin-top:8px;display:flex;gap:6px;">${recBtn}${cancelBtn}</div>
   </div>`;
 });
}

/* Cancel Order */
function cancelOrder(id){
 const o=orders.find(x=>x.id===id);
 if(!o)return;
 const reason=prompt("Reason for cancellation:","Changed my mind");
 o.status='Cancelled';
 o.remark=reason;
 o.trackingStage=0;
 save(); renderOrders();
}

/* Download Receipt */
async function downloadReceipt(id){
 const o=orders.find(x=>x.id===id); if(!o)return;
 const temp=document.createElement('div');
 temp.innerHTML=`
 <div style="font-family:sans-serif;padding:20px;background:white;color:black;width:260px">
   <h3 style="text-align:center;color:#ec4899;">Trendspy Receipt</h3>
   <hr><b>Order ID:</b> ${o.id}<br>
   <b>Name:</b> ${o.user}<br>
   <b>Total:</b> ${o.total}<br>
   <b>Status:</b> ${o.status}<br>
   <b>Date:</b> ${o.ts}<br><hr>
   <b>Items:</b><br>${Object.values(o.items).map(i=>`${i.title} √ó ${i.qty}`).join('<br>')}
   <hr><small>Thank you for shopping with Trendspy!</small>
 </div>`;
 document.body.appendChild(temp);
 const canvas=await html2canvas(temp);
 const pdf=new jspdf.jsPDF();
 const img=canvas.toDataURL('image/png');
 const w=pdf.internal.pageSize.getWidth();
 const h=(canvas.height*w)/canvas.width;
 pdf.addImage(img,'PNG',0,0,w,h);
 pdf.save(`Receipt_${o.id}.pdf`);
 temp.remove();
 toast("Receipt downloaded.");
}

/* Customer Login */
el('login-btn').onclick=()=>{
 if(user){
   if(confirm("Logout?")){user=null;localStorage.removeItem('user');el('login-btn').textContent='Customer Login';}
 } else el('login-modal').style.display='flex';
};
el('close-login').onclick=()=>el('login-modal').style.display='none';
el('cust-login').onclick=()=>{
 const n=el('cust-name').value.trim(), c=el('cust-contact').value.trim();
 if(!n)return toast("Enter name!");
 if(!isValidPhone(c))return toast("Invalid phone number!");
 user={name:n,contact:c};
 save(); el('login-modal').style.display='none';
 el('login-btn').textContent='Logout';
 toast(`Welcome ${n}!`);
};

/* Admin Login */
const ADMIN={user:"admin",pass:"trendspy123"};
el('admin-login-btn').onclick=()=>el('admin-modal').style.display='flex';
el('close-admin').onclick=()=>el('admin-modal').style.display='none';
el('admin-login').onclick=()=>{
 const u=el('admin-user').value.trim(), p=el('admin-pass').value.trim();
 if(u===ADMIN.user && p===ADMIN.pass){
   toast("Redirecting to admin dashboard...");
   setTimeout(()=>window.location.href='shop.html',800);
 } else toast("Invalid admin credentials!");
};

/* Init */
if(user)el('login-btn').textContent='Logout';
renderProducts();renderCart();renderOrders();
</script>
</body>
</html>
